# ××¢×¨×›×ª ×—×™×œ×•×¥ ×˜×•×¤×¡ 106

××¢×¨×›×ª ××•×˜×•××˜×™×ª ×œ×—×™×œ×•×¥ × ×ª×•× ×™× ××˜×•×¤×¡×™ 106 (×”×›× ×¡×” ×©× ×ª×™×ª) ×©×œ ×¢×•×‘×“×™× ×‘×™×©×¨××œ.

## ğŸ“‹ ×ª×•×›×Ÿ ×”×¢× ×™×™× ×™×

- [×¡×§×™×¨×” ×›×œ×œ×™×ª](#×¡×§×™×¨×”-×›×œ×œ×™×ª)
- [×ª×›×•× ×•×ª](#×ª×›×•× ×•×ª)
- [×“×¨×™×©×•×ª ××§×“×™××•×ª](#×“×¨×™×©×•×ª-××§×“×™××•×ª)
- [×”×ª×§× ×”](#×”×ª×§× ×”)
- [×©×™××•×©](#×©×™××•×©)
- [××¨×›×™×˜×§×˜×•×¨×”](#××¨×›×™×˜×§×˜×•×¨×”)
- [API ×“×•×§×•×× ×˜×¦×™×”](#api-×“×•×§×•×× ×˜×¦×™×”)
- [×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª](#×¤×ª×¨×•×Ÿ-×‘×¢×™×•×ª)
- [×¤×™×ª×•×—](#×¤×™×ª×•×—)

## ğŸ¯ ×¡×§×™×¨×” ×›×œ×œ×™×ª

×”××¢×¨×›×ª ×××¤×©×¨×ª ×œ×”×¢×œ×•×ª ×§×•×‘×¦×™ PDF ×©×œ ×˜×•×¤×¡ 106 ×•×œ×—×œ×¥ ×‘×¦×•×¨×” ××•×˜×•××˜×™×ª ××ª ×›×œ ×”× ×ª×•× ×™× ×”×¨×œ×•×•× ×˜×™×™× ×›×•×œ×œ:
- ×¤×¨×˜×™ ×”×¢×•×‘×“ (×©×, ×ª×¢×•×“×ª ×–×”×•×ª, ×›×ª×•×‘×ª)
- ×¤×¨×˜×™ ×”××¢×¡×™×§ (×©×, ××¡×¤×¨ ×¢×•×¡×§ ××•×¨×©×”)
- ×”×›× ×¡×” (×¡×”×´×›, ×”×ª×¤×œ×’×•×ª ×—×•×“×©×™×ª)
- ××¡ (××¡ ×©× ×•×›×”, × ×§×•×“×•×ª ×–×™×›×•×™)
- × ×™×›×•×™×™× (×‘×™×˜×•×— ×œ××•××™, ×¤× ×¡×™×”, ×•×›×•×³)
- ×ª×§×•×¤×ª ×¢×‘×•×“×”

## âœ¨ ×ª×›×•× ×•×ª

âœ… **×—×™×œ×•×¥ AI ××‘×•×¡×¡**: ×©×™××•×© ×‘-Google Gemini ×œ×—×™×œ×•×¥ ××“×•×™×§ ×©×œ × ×ª×•× ×™×
âœ… **××¤×œ×™×§×¦×™×” ×—×“-×¢××•×“×™×ª React**: ×××©×§ ××©×ª××© ××•×“×¨× ×™ ×•×¨×™××§×˜×™×‘×™
âœ… **×œ×œ× ×§×•×“**: ×–×¨×™××ª ×¢×‘×•×“×” n8n ×œ×œ× nodes ×©×œ ×§×•×“ (×›×œ ×—×™×©×•×‘×™× ××ª×•×š Set nodes)
âœ… **×¢×“×›×•×Ÿ ×‘×–××Ÿ ×××ª**: ×¢×™×‘×•×“ ××™×™×“×™ ×©×œ ×§×‘×¦×™×
âœ… **×˜×¢×™× ×” ×’×¨×•×¨-×•×©×—×¨×•×¨**: ×××©×§ ××©×ª××© ××™× ×˜×•××™×˜×™×‘×™
âœ… **×”×¦×’×” ××•×‘× ×™×ª**: ××¨×’×•×Ÿ × ×ª×•× ×™× ×œ×¤×™ ×§×˜×’×•×¨×™×•×ª
âœ… **×˜×™×¤×•×œ ×©×’×™××•×ª**: ×”×•×“×¢×•×ª ×©×’×™××” ××¤×•×¨×˜×•×ª ×œ×”×ª××‘×—×•×Ÿ

## ğŸ“¦ ×“×¨×™×©×•×ª ××§×“×™××•×ª

### n8n Server
- n8n v0.220 ×•××¢×œ×”
- Google Gemini API credentials
- Node.js 18+ (×œ×©×¨×ª n8n)

### React Frontend
- Node.js 16+ ×•-npm/yarn
- Vite ××• Create React App
- ×“×¤×“×¤×Ÿ ×¢× ×ª××™×›×” ES6+

### ×˜×•×¤×¡×™× ×œ×‘×“×™×§×”
- ×§×‘×¦×™ PDF ×©×œ ×˜×•×¤×¡ 106 ×‘×ª×™×§×™×™×” `×§×‘×¦×™ 106`

## ğŸš€ ×”×ª×§× ×”

### 1. ×©×¨×ª n8n

```bash
# ×”×ª×§×Ÿ n8n ×‘×©×¨×ª ×©×œ×š
npm install -g n8n

# ×”×ª×—×œ ××ª ×”×©×¨×ª
n8n start

# ×©×¨×ª ×™×—×œ ×‘×›×ª×•×‘×ª http://localhost:5678
```

### 2. ×”×’×“×¨ Google Gemini API

1. ×¢×‘×•×¨ ×œ-[Google Cloud Console](https://console.cloud.google.com)
2. ×¦×•×¨ project ×—×“×©
3. ×”×¤×¢×œ ××ª `Generative Language API`
4. ×¦×•×¨ API key ×—×“×©
5. ×‘×—×–×¨×” ×œ-n8n, ×”×•×¡×£ credentials ×—×“×© ×œ×“×™×•×§ `googlePalmApi`

### 3. ×™×™×‘× ××ª ×–×¨×™××ª ×”×¢×‘×•×“×”

1. ×¤×ª×— ××ª n8n ×‘×“×¤×“×¤×Ÿ
2. ×œ×—×¥ ×¢×œ `Import workflow`
3. ×‘×—×¨ ××ª ×§×•×‘×¥ `tax-refund-workflow.json`
4. ×‘×—×¨ ××ª Google Gemini credentials
5. ×”× ×— ××ª ×”×¦×‘×™×¨×”

### 4. ×”×’×“×¨×ª React Frontend

```bash
# ×¢×‘×•×¨ ×œ×ª×™×§×™×™×ª frontend
cd frontend

# ×”×ª×§×Ÿ ×ª×œ×•×™×•×ª
npm install

# ×”×’×“×¨ URL ×©×œ webhook ×‘-.env
echo "REACT_APP_WEBHOOK_URL=http://localhost:5678/webhook/tax-refund" > .env.local

# ×”×ª×—×œ ××ª ×©×¨×ª ×¤×™×ª×•×—
npm run dev

# Vite ×™×—×œ ×‘×›×ª×•×‘×ª http://localhost:3000
```

## ğŸ’¡ ×©×™××•×©

### ×“×¨×š ×××©×§ ×”×•×•×‘

1. ×¤×ª×— ××ª `http://localhost:3000`
2. ×’×¨×•×¨ ×§×•×‘×¥ PDF ×©×œ ×˜×•×¤×¡ 106 ××• ×œ×—×¥ ×œ×‘×—×™×¨×”
3. ×œ×—×¥ ×¢×œ "×”×¢×œ×” ×•×—×œ×¥ × ×ª×•× ×™×"
4. ×”××¢×¨×›×ª ×ª×—×œ×¥ ××ª ×”× ×ª×•× ×™× ×•×ª×¦×™×’ ××•×ª×

### ×“×¨×š API ×™×©×™×¨×”

```bash
# ×”×¢×œ×” ×§×•×‘×¥
curl -X POST \
  -F "file=@/path/to/form106.pdf" \
  http://localhost:5678/webhook/tax-refund

# ×ª×’×•×‘×” ××•×¦×œ×—×ª
{
  "status": "success",
  "data": {
    "tax_year": "2024",
    "employee": { ... },
    "employer": { ... },
    "income": { ... },
    ...
  },
  "extracted_at": "2024-02-01T12:00:00Z"
}
```

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React SPA (Frontend)                   â”‚
â”‚  - FileUpload: ×˜×¢×™× ×” ×’×¨×•×¨-×•×©×—×¨×•×¨                       â”‚
â”‚  - ResultsDisplay: ×”×¦×’×ª × ×ª×•× ×™×                          â”‚
â”‚  - ErrorDisplay: ×˜×™×¤×•×œ ×©×’×™××•×ª                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ POST /webhook/tax-refund
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           n8n Workflow (Processing Logic)               â”‚
â”‚                                                         â”‚
â”‚  Webhook â†’ Gemini AI â†’ Parse JSON â†’ Validate â†’ Response â”‚
â”‚                                                         â”‚
â”‚  â€¢ ×§×‘×œ×ª ×§×•×‘×¥ PDF                                        â”‚
â”‚  â€¢ ×—×™×œ×•×¥ × ×ª×•× ×™× ×¢× Gemini                              â”‚
â”‚  â€¢ ×¤×¨×¡×•×¨ ×ª×©×•×‘×ª AI ×œ-JSON                               â”‚
â”‚  â€¢ ×‘×“×™×§×ª ×©×“×•×ª ×—×•×‘×”                                     â”‚
â”‚  â€¢ ×‘× ×™×™×ª ×ª×’×•×‘×” ××•×‘× ×™×ª                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ JSON Response
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Response JSON Structure                    â”‚
â”‚  {                                                      â”‚
â”‚    "status": "success|error",                           â”‚
â”‚    "data": { extracted_fields },                        â”‚
â”‚    "extracted_at": "ISO timestamp"                      â”‚
â”‚  }                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ API ×“×•×§×•×× ×˜×¦×™×”

### Webhook Endpoint
**URL**: `POST /webhook/tax-refund`
**Input**: Form Data with PDF file

### Success Response (200 OK)
```json
{
  "status": "success",
  "data": {
    "tax_year": "2024",
    "employee": {
      "name": "×©× ×¢×•×‘×“",
      "id": "×ª×¢×•×“×ª ×–×”×•×ª",
      "address": "×›×ª×•×‘×ª",
      "phone": "×˜×œ×¤×•×Ÿ"
    },
    "employer": {
      "name": "×©× ××¢×¡×™×§",
      "id": "××¡×¤×¨ ×¢×•×¡×§"
    },
    "income": {
      "total": 150000,
      "monthly": [12500, 12500, ...]
    },
    "tax": {
      "total_paid": 30000,
      "credit_points": 2
    },
    "deductions": {
      "national_insurance": 6000,
      "health_insurance": 3000,
      "pension_employee": 7500,
      "pension_employer": 7500,
      "training_fund": 0,
      "severance_fund": 0
    },
    "work_period": {
      "days": 250,
      "months": 12
    }
  },
  "extracted_at": "2024-02-01T12:00:00Z"
}
```

### Error Response (400 Bad Request)
```json
{
  "status": "error",
  "error": {
    "code": "VALIDATION_FAILED",
    "message": "×”×˜×•×¤×¡ ×œ× ×¢×‘×¨ ××ª ×”×•×œ×™×“×¦×™×” ×”×‘×¡×™×¡×™×ª",
    "details": {
      "has_required_fields": false,
      "income_valid": false,
      "tax_paid_valid": true,
      "extracted_data": { ... }
    }
  },
  "extracted_at": "2024-02-01T12:00:00Z"
}
```

## ğŸ”§ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### "×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×©×¨×ª"
- ×‘×“×•×§ ×©×¨×ª n8n ×¨×¥ ×‘-http://localhost:5678
- ×•×•×“× ×©×”-CORS ××•×¤×¢×œ (×× frontend ×•-backend ×‘×“×•××™×™× ×™× ×©×•× ×™×)

### "×”×˜×•×¤×¡ ×œ× ×¢×‘×¨ ×‘×“×™×§×”"
- ×ª×Ÿ ×•×“× ×©×”×§×•×‘×¥ ×”×•× PDF ×ª×§×™×Ÿ
- ×‘×“×•×§ ×©×”-PDF ××›×™×œ ×˜×•×¤×¡ 106 ×™×©×¨××œ×™
- ×•×•×“× ×©×”×©×“×•×ª ×”×—×•×‘×” (×©× ×”, ×”×›× ×¡×”) × ×§×‘×œ×•

### "Google Gemini API key invalid"
- ×‘×“×•×§ ××ª ×”-credentials ×‘×—×œ×§ n8n
- ×•×•×“× ×©×”-API ××•×¤×¢×œ ×‘-Google Cloud Console

### "CORS Error"
- ×•×“× ×©×”-webhook ××•×’×“×¨ ×¢× `Response Mode: Respond Using Last Node`
- ×”×•×¡×£ headers CORS ×× ×¦×¨×™×š ×‘×”×’×“×¨×•×ª n8n

## ğŸ‘¨â€ğŸ’» ×¤×™×ª×•×—

### ××‘× ×” ×”×¤×¨×•×™×§×˜
```
tax-refund/
â”œâ”€â”€ tax-refund-workflow.json    # n8n workflow
â”œâ”€â”€ frontend/                    # React app
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”‚   â”œâ”€â”€ hooks/               # Custom hooks
â”‚   â”‚   â”œâ”€â”€ services/            # API client
â”‚   â”‚   â”œâ”€â”€ utils/               # Utility functions
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ index.jsx
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ README.md
â”œâ”€â”€ DEPLOYMENT.md
â””â”€â”€ claude.md
```

### ×¤×™×ª×•×— Frontend

```bash
cd frontend
npm run dev      # ×”×ª×—×œ ×©×¨×ª Vite
npm run build    # ×‘× ×” ×œ×™×™×¦×•×¨
npm run preview  # ×ª×¦×•×’×” ××§×“×™××” ×©×œ ×‘× ×™×™×”
```

### ×¢×“×›×•×Ÿ ×–×¨×™××ª ×”×¢×‘×•×“×”

1. ×©× ×” ××ª ×§×•×‘×¥ `tax-refund-workflow.json`
2. ×™×™×‘× ××—×“×© ×‘-n8n
3. ×‘×“×•×§ ××ª ×”×¢×‘×•×“×” ×‘×—×“×¨ × ×™×¡×™×•×Ÿ

## ğŸ“„ ×§×‘×¦×™× ×—×©×•×‘×™×

- **tax-refund-workflow.json**: ×’×“×¨×™ n8n
- **DEPLOYMENT.md**: ×”× ×—×™×•×ª ×¤×¨×™×¡×” ×œ×™×™×¦×•×¨
- **claude.md**: ×”×§×©×¨ ×¢×‘×•×¨ ×¤×™×ª×•×— AI-assisted

## ğŸ“œ ×¨×™×©×™×•×Ÿ

MIT License - ×¨××” ×§×•×‘×¥ LICENSE

## ğŸ¤ ×ª×¨×•××•×ª

×™×ª×§×‘×œ×• pull requests ×¢× ×©×™×¤×•×¨×™×.

## ğŸ“ ×ª××™×›×”

×œ×©××œ×•×ª ××• ×‘×¢×™×•×ª:
1. ×‘×“×•×§ ××ª [DEPLOYMENT.md](DEPLOYMENT.md)
2. ×‘×“×•×§ ××ª [claude.md](claude.md)
3. ×¡×§×•×¨ ××ª ×”×œ×•×’×™× ×©×œ n8n
